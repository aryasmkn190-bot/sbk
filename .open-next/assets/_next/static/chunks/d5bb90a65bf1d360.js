(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8599,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(95069),r=e.i(96678),l=e.i(50719),s=e.i(46932),n=e.i(50815),d=e.i(10837);let o="warning",c={success:{backgroundColor:"bg-success-subtle",titleColor:"text-success",textColor:"text-success",iconColor:"text-success",icon:(0,t.jsx)(l.HiCheckCircle,{})},info:{backgroundColor:"bg-info-subtle",titleColor:"text-info",textColor:"text-info",iconColor:"text-info",icon:(0,t.jsx)(l.HiInformationCircle,{})},warning:{backgroundColor:"bg-warning-subtle",titleColor:"text-warning",textColor:"text-warning",iconColor:"text-warning",icon:(0,t.jsx)(l.HiExclamation,{})},danger:{backgroundColor:"bg-error-subtle",titleColor:"text-error",textColor:"text-error",iconColor:"text-error",icon:(0,t.jsx)(l.HiXCircle,{})}},u=["success","danger","info","warning"];e.s(["default",0,e=>{let{children:l,className:m,closable:x=!1,customClose:g,customIcon:f,duration:p=3e3,title:h=null,onClose:b,ref:v,showIcon:j=!1,triggerByToast:y=!1,...C}=e,N=(()=>{let{type:t=o}=e;return u.includes(t)?t:o})(),k=c[N],[S,w]=(0,a.useState)("show"),{clear:_}=(0,r.default)(b,p,p>0),I=(0,i.default)("alert",k.backgroundColor,k.textColor,h?"":"font-semibold",x?"justify-between":"",x&&!h?"items-center":"",!y&&"rounded-xl",m);return"hide"===S?null:(0,t.jsxs)(s.motion.div,{ref:v,className:I,initial:{opacity:1},animate:"hiding"===S?"exit":"animate",transition:{duration:.25,type:"tween"},variants:{animate:{opacity:1},exit:{opacity:0}},...C,children:[(0,t.jsxs)("div",{className:(0,i.default)("flex gap-2",!h&&l?"items-center":"",h&&l?"mt-0.5":""),children:[j&&(0,t.jsx)(d.default,{iconColor:k.iconColor,custom:f,type:N}),(0,t.jsxs)("div",{children:[h?(0,t.jsx)("div",{className:(0,i.default)("font-semibold text-lg mb-1",k.titleColor),children:h}):null,l]})]}),x?(0,t.jsx)("div",{className:"cursor-pointer",role:"presentation",onClick:e=>{w("hiding"),b?.(e),_(),!y&&setTimeout(()=>{w("hide")},400)},children:g||(0,t.jsx)(n.default,{resetDefaultClass:!0,className:"text-lg outline-hidden"})}):null]})}],8599)},61112,50736,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(43794);e.i(19656);var r=e.i(44721),l=e.i(42018),s=e.i(88374),n=e.i(88598),d=e.i(29873);let o=e=>{let o,c,u,{asElement:m="input",className:x,disabled:g,invalid:f,prefix:p,size:h,suffix:b,textArea:v,type:j="text",ref:y,rows:C,style:N,unstyle:k=!1,...S}=e,[w,_]=(0,a.useState)(0),[I,R]=(0,a.useState)(0),{controlSize:L,direction:T}=(0,r.useConfig)(),O=(0,l.useForm)()?.size,P=(0,l.useFormItem)()?.invalid,A=(0,s.useInputGroup)()?.size,U=h||A||O||L,D=f||P;if("value"in e){var E;S.value=null==(E=e.value)?"":E,delete S.defaultValue}let M=`input-${U} ${n.CONTROL_SIZES[U].h}`,B=(0,i.default)("input-wrapper",p||b?x:""),F=(0,i.default)("input",M,!D&&"focus:ring-primary focus-within:ring-primary focus-within:border-primary focus:border-primary",p||b?"":x,g&&"input-disabled",D&&"input-invalid",v&&"input-textarea"),G=(0,a.useRef)(null),$=(0,a.useRef)(null);(0,a.useEffect)(()=>{(()=>{if(!G.current&&!$.current)return;let e=G?.current?.offsetWidth,t=$?.current?.offsetWidth;!((0,d.default)(e)&&(0,d.default)(t))&&(e&&_(e),t&&R(t))})()},[p,b]);let H={className:k?"":F,disabled:g,type:j,ref:y,...S},Z=(0,t.jsx)("textarea",{style:N,rows:C,...H}),W=(0,t.jsx)(m,{style:{...(o=`${.0625*w+1}rem`,c=`${.0625*I+1}rem`,u={},"ltr"===T&&(p&&(u.paddingLeft=o),b&&(u.paddingRight=c)),"rtl"===T&&(p&&(u.paddingRight=o),b&&(u.paddingLeft=c)),u),...N},...H}),Y=(0,t.jsxs)("span",{className:B,children:[p?(0,t.jsxs)("div",{ref:G,className:"input-suffix-start",children:[" ",p," "]}):null,W,b?(0,t.jsx)("div",{ref:$,className:"input-suffix-end",children:b}):null]});return v?Z:p||b?Y:W};e.s(["default",0,o],50736),e.s(["default",0,o],61112)},61222,65748,69749,e=>{"use strict";var t=e.i(43476),a=e.i(42018);e.i(19656);var i=e.i(44721),r=e.i(43794),l=e.i(88598);let s=e=>{let{controlSize:s}=(0,i.useConfig)(),{children:n,className:d,labelWidth:o=100,layout:c=l.LAYOUT.VERTICAL,size:u=l.SIZES.MD}=e;return(0,t.jsx)(a.FormContextProvider,{value:{labelWidth:o,layout:c,size:u||s},children:(0,t.jsx)(a.FormContextConsumer,{children:e=>(0,t.jsx)("div",{className:(0,r.default)("form-container",e?.layout,d),children:n})})})};s.displayName="FormContainer",e.s(["default",0,s],65748),e.s(["default",0,e=>{let{children:a,containerClassName:i,labelWidth:r,layout:l,size:n,ref:d,...o}=e;return(0,t.jsx)("form",{ref:d,...o,children:(0,t.jsx)(s,{className:i,labelWidth:r,layout:l,size:n,children:a})})}],61222);var n=e.i(95069),d=e.i(46932),o=e.i(88653);e.s(["default",0,e=>{let{asterisk:r,children:s,className:c,errorMessage:u,extra:m,htmlFor:x,invalid:g,label:f,labelClass:p,labelWidth:h,layout:b,ref:v,style:j,size:y}=e,C=(0,a.useForm)(),{controlSize:N}=(0,i.useConfig)(),k=y||C?.size||N,S=h||C?.labelWidth,w=b||C?.layout||"vertical",_=(0,n.default)("form-item",w,c,g?"invalid":""),I=(0,n.default)("form-label",f&&(()=>{switch(w){case l.LAYOUT.HORIZONTAL:return f?`${l.CONTROL_SIZES[k].h} ${f&&"ltr:pr-2 rtl:pl-2"}`:"ltr:pr-2 rtl:pl-2";case l.LAYOUT.VERTICAL:return"mb-2";case l.LAYOUT.INLINE:return`${l.CONTROL_SIZES[k].h} ${f&&"ltr:pr-2 rtl:pl-2"}`;default:return""}})(),p),R={opacity:0,marginTop:-10};return(0,t.jsx)(a.FormItemContextProvider,{value:{invalid:g},children:(0,t.jsxs)("div",{ref:v,className:_,children:[(0,t.jsxs)("label",{htmlFor:x,className:I,style:w===l.LAYOUT.HORIZONTAL?{...j,minWidth:S}:{...j},children:[r&&(0,t.jsx)("span",{className:"text-red-500 ltr:mr-1 rtl:ml-1",children:"*"}),f,m&&(0,t.jsx)("span",{children:m}),f&&"vertical"!==w&&":"]}),(0,t.jsxs)("div",{className:w===l.LAYOUT.HORIZONTAL?"w-full flex flex-col justify-center relative":"",children:[s,(0,t.jsx)(o.AnimatePresence,{mode:"wait",children:g&&(0,t.jsx)(d.motion.div,{className:"form-explain",initial:R,animate:{opacity:1,marginTop:3,bottom:-21},exit:R,transition:{duration:.15,type:"tween"},children:u})})]})]})})}],69749)},57766,e=>{"use strict";var t=e.i(50736);e.s(["Input",()=>t.default])},88918,61091,50949,30634,e=>{"use strict";var t=e.i(5702);e.s(["Button",()=>t.default],88918);var a=e.i(61112);e.s(["Input",()=>a.default],61091);var i=e.i(14926);e.s(["Notification",()=>i.default],50949);var r=e.i(73135);e.s(["toast",()=>r.default],30634)},75230,e=>{"use strict";var t=e.i(16302);e.s(["Select",()=>t.default])},35073,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("40df2b0c12396596b4e6cc85e14bd942bf6ea2e544",t.callServer,void 0,t.findSourceMapURL,"uploadImage");e.s(["uploadImage",()=>a])},23520,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("00df93a0ae317fef9e8935bba0a0cd94f2184bcfd7",t.callServer,void 0,t.findSourceMapURL,"getCampaignCategories");e.s(["getCampaignCategories",()=>a])},27758,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(16787);var i=e.i(83281),r=e.i(88918),l=e.i(61091),s=e.i(75230),n=e.i(50949),d=e.i(30634),o=e.i(20777),c=e.i(72637),u=e.i(22016),m=e.i(59098),x=e.i(35073),g=e.i(18566),f=e.i(95187);let p=(0,f.createServerReference)("605728742b7116473d04380ed7dbc3079fbb81239b",f.callServer,void 0,f.findSourceMapURL,"createCampaign"),h=(0,f.createServerReference)("40ec91c1144117d069a4696094b401c46ab7182d99",f.callServer,void 0,f.findSourceMapURL,"getCampaignById"),b=(0,f.createServerReference)("60fef4a62cf605861e0a2c1ee53e8b540be428641f",f.callServer,void 0,f.findSourceMapURL,"updateCampaign");var v=e.i(23520);let j=[{value:"draft",label:"Draft"},{value:"active",label:"Aktif"}];e.s(["default",0,()=>{let e=(0,g.useRouter)(),f=(0,g.useParams)(),y=f?.id,C="create"!==y,[N,k]=(0,a.useState)([]),[S,w]=(0,a.useState)(!1),[_,I]=(0,a.useState)({title:"",description:"",content:"",image:"",category_id:"",target_amount:"",start_date:"",end_date:"",status:"draft"});(0,a.useEffect)(()=>{let e=async()=>{if(C&&y){let e=await h(y);e&&I({title:e.title,description:e.description,content:e.content,image:e.image,category_id:e.category_id||"",target_amount:String(e.target_amount),start_date:e.start_date,end_date:e.end_date||"",status:e.status})}};(async()=>{k((await (0,v.getCampaignCategories)()).map(e=>({value:e.id,label:e.name})))})(),e()},[y,C]);let R=(e,t)=>{I(a=>({...a,[e]:t}))},L=async e=>{if(0!==e.length)try{let a=new FormData;a.append("file",e[0]);let i=await (0,x.uploadImage)(a);R("image",i.url),d.toast.push((0,t.jsx)(n.Notification,{type:"success",title:"Berhasil",children:"Gambar berhasil diunggah."}))}catch(e){d.toast.push((0,t.jsx)(n.Notification,{type:"danger",title:"Error",children:"Gagal mengunggah gambar."}))}},T=async a=>{if(!_.title||!_.description||!_.target_amount||!_.start_date)return void d.toast.push((0,t.jsx)(n.Notification,{type:"warning",title:"Peringatan",children:"Mohon lengkapi field yang wajib diisi."}));w(!0);try{let i={title:_.title,description:_.description,content:_.content,image:_.image||void 0,category_id:_.category_id||void 0,target_amount:parseFloat(_.target_amount),start_date:_.start_date,end_date:_.end_date||void 0,status:a||_.status};C?(await b(y,i),d.toast.push((0,t.jsx)(n.Notification,{type:"success",title:"Berhasil",children:"Campaign berhasil diperbarui!"}))):(await p(i),d.toast.push((0,t.jsx)(n.Notification,{type:"success",title:"Berhasil",children:"Campaign berhasil dibuat!"}))),e.push("/dashboard/campaigns")}catch(e){d.toast.push((0,t.jsx)(n.Notification,{type:"danger",title:"Error",children:"Gagal menyimpan campaign."}))}finally{w(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(u.default,{href:"/dashboard/campaigns",className:"inline-flex items-center gap-1 text-sm text-gray-500 hover:text-primary mb-4",children:[(0,t.jsx)(c.PiArrowLeftDuotone,{})," Kembali ke Daftar Campaign"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"xl:col-span-2 flex flex-col gap-6",children:[(0,t.jsx)(i.Card,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h5",{className:"font-bold mb-4",children:"Informasi Campaign"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Judul Campaign *"}),(0,t.jsx)(l.Input,{placeholder:"Masukkan judul campaign...",value:_.title,onChange:e=>R("title",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deskripsi Singkat *"}),(0,t.jsx)(l.Input,{textArea:!0,placeholder:"Deskripsi singkat campaign...",value:_.description,onChange:e=>R("description",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Konten Detail"}),(0,t.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(0,t.jsx)(m.default,{content:_.content,onChange:({html:e})=>R("content",e)})})]})]})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h5",{className:"font-bold mb-4",children:"Gambar Campaign"}),(0,t.jsx)(o.Upload,{draggable:!0,onChange:e=>L(e),showList:!1,accept:"image/*",children:(0,t.jsxs)("div",{className:"border border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 text-center hover:border-primary transition-colors cursor-pointer w-full bg-gray-50 dark:bg-gray-800",children:[_.image?(0,t.jsx)("img",{src:_.image,alt:"Preview",className:"mx-auto max-h-48 object-contain rounded-lg mb-3 shadow-md"}):(0,t.jsx)(c.PiUploadDuotone,{className:"text-4xl mx-auto mb-3 text-gray-400"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:_.image?"Ubah Gambar":"Pilih atau letakkan gambar di sini"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Mendukung format PNG, JPG, WebP (Maks. 2MB)"})]})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)(i.Card,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h5",{className:"font-bold mb-4",children:"Pengaturan"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kategori *"}),(0,t.jsx)(s.Select,{options:N,placeholder:"Pilih kategori...",onChange:e=>R("category_id",e?.value||"")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,t.jsx)(s.Select,{options:j,defaultValue:j[0],onChange:e=>R("status",e?.value||"draft")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Donasi (Rp) *"}),(0,t.jsx)(l.Input,{placeholder:"50000000",type:"number",value:_.target_amount,onChange:e=>R("target_amount",e.target.value)})]})]})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h5",{className:"font-bold mb-4",children:"Periode Campaign"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tanggal Mulai *"}),(0,t.jsx)(l.Input,{type:"date",value:_.start_date,onChange:e=>R("start_date",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tanggal Berakhir"}),(0,t.jsx)(l.Input,{type:"date",value:_.end_date,onChange:e=>R("end_date",e.target.value)})]})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(r.Button,{variant:"solid",block:!0,icon:(0,t.jsx)(c.PiFloppyDiskDuotone,{}),loading:S,onClick:()=>T(),children:C?"Simpan Perubahan":"Simpan Campaign"}),(0,t.jsx)(r.Button,{variant:"default",block:!0,onClick:()=>T("draft"),loading:S,children:"Simpan sebagai Draft"})]})]})]})]})}],27758)}]);