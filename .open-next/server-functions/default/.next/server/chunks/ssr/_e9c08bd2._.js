module.exports=[69856,a=>{"use strict";var b=a.i(37936),c=a.i(77607),d=a.i(95562),e=a.i(13095);let f=async()=>{await (0,c.signOut)({redirectTo:d.default.unAuthenticatedEntryPath})};(0,e.ensureServerEntryExports)([f]),(0,b.registerServerReference)(f,"0044e7f0bb2859832d1c4d0d422bd8cfafad8fcd7f",null),a.s(["default",0,f])},91053,a=>{"use strict";var b=a.i(37936),c=a.i(48734);async function d(a){let b=`
        SELECT d.*, c.title as campaign_title
        FROM donations d
        LEFT JOIN campaigns c ON d.campaign_id = c.id
    `,d=[];return a&&"all"!==a&&(b+=" WHERE d.status = ?",d.push(a)),b+=" ORDER BY d.created_at DESC",(0,c.query)(b,d)}async function e(a){return(0,c.queryFirst)(`SELECT d.*, c.title as campaign_title
         FROM donations d
         LEFT JOIN campaigns c ON d.campaign_id = c.id
         WHERE d.id = ?`,[a])}async function f(a=5){return(0,c.query)(`SELECT d.*, c.title as campaign_title
         FROM donations d
         LEFT JOIN campaigns c ON d.campaign_id = c.id
         ORDER BY d.created_at DESC LIMIT ?`,[a])}async function g(){let a=await (0,c.queryFirst)(`SELECT COUNT(*) as count, COALESCE(SUM(amount), 0) as total 
         FROM donations WHERE status = 'pending'`),b=await (0,c.queryFirst)(`SELECT COALESCE(SUM(amount), 0) as total FROM donations 
         WHERE status = 'verified' AND created_at >= datetime('now', 'start of month')`),d=await (0,c.queryFirst)("SELECT COALESCE(SUM(amount), 0) as total FROM donations WHERE status = 'verified'");return{pendingCount:a?.count||0,pendingTotal:a?.total||0,verifiedThisMonth:b?.total||0,totalAll:d?.total||0}}async function h(a){let b=(0,c.generateId)();return await (0,c.execute)(`INSERT INTO donations (id, campaign_id, donor_name, donor_email, donor_phone, amount, message, is_anonymous, payment_method, created_at)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[b,a.campaign_id,a.donor_name,a.donor_email,a.donor_phone||"",a.amount,a.message||"",+!!a.is_anonymous,a.payment_method||"transfer",(0,c.nowWIB)()]),{id:b}}async function i(a,b){await (0,c.execute)("UPDATE donations SET payment_proof = ? WHERE id = ?",[b,a])}async function j(a,b="admin-001"){let d=await e(a);if(!d)throw Error("Donasi tidak ditemukan");await (0,c.execute)("UPDATE donations SET status = 'verified', verified_by = ?, verified_at = ? WHERE id = ?",[b,(0,c.nowWIB)(),a]),await (0,c.execute)(`UPDATE campaigns SET 
            collected_amount = collected_amount + ?,
            donor_count = donor_count + 1,
            updated_at = ?
         WHERE id = ?`,[d.amount,(0,c.nowWIB)(),d.campaign_id])}async function k(a){await (0,c.execute)("UPDATE donations SET status = 'rejected' WHERE id = ?",[a])}async function l(a){await (0,c.execute)("DELETE FROM donations WHERE id = ?",[a])}(0,a.i(13095).ensureServerEntryExports)([d,e,f,g,h,i,j,k,l]),(0,b.registerServerReference)(d,"40ec595c3630979151c709855655d8fa74ea3d923d",null),(0,b.registerServerReference)(e,"402681618cbf8ab5b5357bb2d8e6970950dfc28908",null),(0,b.registerServerReference)(f,"40b3dcce4287f4bdd8f2090c15b06c9f3793c3aeb4",null),(0,b.registerServerReference)(g,"006ed7c8bf2894eedb249ba77df49f66dbfdffcad2",null),(0,b.registerServerReference)(h,"40ff14a49a40edb98621a06aa5c7509d31de112e24",null),(0,b.registerServerReference)(i,"601c893282998d9caca73bca888b743fc0aa9ee8d9",null),(0,b.registerServerReference)(j,"60d0fe0719260417148140217b5fd39de9db7702bb",null),(0,b.registerServerReference)(k,"4092bd3a821b2d4072c55e5a8ad7af70c2843495d5",null),(0,b.registerServerReference)(l,"406d05b6b77ddc79b723bac7c7b7af0f3cd8fb7046",null),a.s(["createDonation",()=>h,"getDonationSummary",()=>g,"getDonations",()=>d,"getRecentDonations",()=>f,"rejectDonation",()=>k,"updatePaymentProof",()=>i,"verifyDonation",()=>j])},5739,a=>{"use strict";var b=a.i(39624),c=a.i(25737),d=a.i(69856),e=a.i(91053);a.s([],24380),a.i(24380),a.s(["0044e7f0bb2859832d1c4d0d422bd8cfafad8fcd7f",()=>d.default,"006ed7c8bf2894eedb249ba77df49f66dbfdffcad2",()=>e.getDonationSummary,"00cf2a8738ddd41ad6903161d87efa51e887637153",()=>c.getTheme,"40745ded225c07a0af4ec4245c71c88dec53a174cf",()=>c.setTheme,"4092bd3a821b2d4072c55e5a8ad7af70c2843495d5",()=>e.rejectDonation,"40ccd30b3cc6655717bc8b6776451d6ff35c8e08bd",()=>b.default,"40ec595c3630979151c709855655d8fa74ea3d923d",()=>e.getDonations,"60d0fe0719260417148140217b5fd39de9db7702bb",()=>e.verifyDonation],5739)}];

//# sourceMappingURL=_e9c08bd2._.js.map